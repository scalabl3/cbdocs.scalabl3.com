// Generated by CoffeeScript 1.3.3
(function() {
  var Navigation, namespace,
    __slice = [].slice;

  Navigation = (function() {
    var _icon_collapsed_class, _icon_expanded_class, _single_node_expanded;

    _icon_collapsed_class = "icon-chevron-right";

    _icon_expanded_class = "icon-chevron-down";

    _single_node_expanded = true;

    function Navigation() {}

    Navigation.assign_data_groups_nav1 = function() {
      var _this = this;
      return $("#nav li.nav1").each(function(i, element) {
        var icon_id;
        $(element).attr("data-group", i);
        icon_id = "nav-icon-" + i;
        $(element).append('<i id="' + icon_id + '" class="pull-right ' + _icon_collapsed_class + ' icon-white"></i>');
        return $(element).click(function() {
          var group, icon;
          icon = $(this).children("i").first();
          group = $(this).attr("data-group");
          if (icon.hasClass(_icon_collapsed_class)) {
            return Navigation.expand_group(group);
          } else {
            return Navigation.collapse_group(group);
          }
        });
      });
    };

    Navigation.assign_data_groups_nav2 = function() {
      var _this = this;
      return $("#nav li").each(function(i, element) {
        if ($(element).hasClass("nav1")) {
          _this.data_group = $(element).attr("data-group");
        }
        return $(element).attr("data-group", _this.data_group);
      });
    };

    Navigation.collapse_all = function() {
      var _this = this;
      Navigation.reset_icons();
      return $('#nav ul li.nav2').each(function(i, element) {
        return $(element).hide();
      });
    };

    Navigation.reset_icons = function() {
      var _this = this;
      return $('#nav ul li.nav1 i').each(function(i, element) {
        return $(element).removeClass(_icon_expanded_class).addClass(_icon_collapsed_class);
      });
    };

    Navigation.expand_group = function(group) {
      var _this = this;
      console.log('expand group ' + group);
      if (_single_node_expanded) {
        Navigation.collapse_all();
      }
      $("#nav .nav1[data-group=" + group + "] i").removeClass(_icon_collapsed_class).addClass(_icon_expanded_class);
      return $("#nav .nav2[data-group=" + group + "]").each(function(i, element) {
        return $(element).show();
      });
    };

    Navigation.collapse_group = function(group) {
      var _this = this;
      console.log('collapse group ' + group);
      $("#nav .nav1[data-group=" + group + "] i").removeClass(_icon_expanded_class).addClass(_icon_collapsed_class);
      return $("#nav .nav2[data-group=" + group + "]").each(function(i, element) {
        return $(element).hide();
      });
    };

    return Navigation;

  })();

  namespace = function(target, name, block) {
    var item, top, _i, _len, _ref, _ref1;
    if (arguments.length < 3) {
      _ref = [(typeof exports !== 'undefined' ? exports : window)].concat(__slice.call(arguments)), target = _ref[0], name = _ref[1], block = _ref[2];
    }
    top = target;
    _ref1 = name.split('.');
    for (_i = 0, _len = _ref1.length; _i < _len; _i++) {
      item = _ref1[_i];
      target = target[item] || (target[item] = {});
    }
    return block(target, top);
  };

  namespace("CB.Doc", function(exports) {
    return exports.Navigation = Navigation;
  });

}).call(this);
